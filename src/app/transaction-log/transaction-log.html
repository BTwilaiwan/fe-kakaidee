<div class="layout-container">
    <div class="container-header">
        <h1 class="title-header">Transaction Log</h1>
        <h2 class="line-header"></h2>
    </div>
    <div class="container-body">
        <div class="flex justify-end mt-3">
            <p-button label="export" class="btn-export" icon="fa-solid fa-cloud-arrow-down" iconPos="left" (click)="onExport()"></p-button>
        </div>
        <div class="grid grid-cols-1 mt-3">
            <p-table [value]="transLog" [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true" [rows]="rows" [rowsPerPageOptions]="[10, 15, 20]" [scrollable]="false"
                (onLazyLoad)="onLazyLoad($event)" [totalRecords]="totalRecords" [lazy]="true">
                <ng-template #header>
                    <tr>
                        <th>User Id</th>
                        <th>Request Id</th>
                        <th>Function Method</th>
                        <th id="thFunctionName">Function Name</th>
                        <th>Count Data</th>
                        <th>Duration ms</th>
                        <th>Query Collection</th>
                        <th>Query Type</th>
                        <th>Start Time</th>
                        <th>Status Code</th>
                        <th>Status Message</th>
                        <th>Created By</th>
                    </tr>
                </ng-template>
                <ng-template #body let-items>
                    <tr>
                        <td class="text-center">{{ items.user_id }}</td>
                        <td class="text-center">{{ items.request_id }}</td>
                        <td class="text-center">{{ items.function_method }}</td>
                        <td id="tdFunctionName">{{ items.function_name }}</td>
                        <td class="text-center">{{ items.count_data }}</td>
                        <td class="text-center">{{ items.duration_ms }}</td>
                        <td>{{ items.query_collection }}</td>
                        <td class="text-center">{{ items.query_type }}</td>
                        <td class="text-center">{{ items.start_time | date :'dd/MM/yyyy' }}</td>
                        <td class="text-center">{{ items.status_code }}</td>
                        <td class="text-center">{{ items.status_message }}</td>
                        <td class="text-center">{{ items.created_by }}</td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="100%" class="text-center">
                            Data not found
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
